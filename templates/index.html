{% extends 'base.html' %}

{% block content %}
<div class="container p-3 my-2 border">
    <h2>
        <mark>
            {% if current_user.is_authenticated %}
            æŒ‰æç¤ºè¾“å…¥å³å¯æ±‚ç®—ã€æäº¤ï¼š
            {% else %}
            æ‚¨æœªç™»å½•ï¼Œè¯·å…ˆğŸ‘†ç™»å½•ğŸ‘†æˆ–ğŸ‘†æ³¨å†ŒğŸ‘†ã€‚
            {% endif %}
        </mark>
    </h2>
    <div align="center">
        <!-- åœ¨æ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ current_user å˜é‡ã€‚ä»¥åˆ›å»ºæ–°æ¡ç›®è¡¨å•ä¸ºä¾‹ï¼Œæˆ‘ä»¬åœ¨è¡¨å•å¤–éƒ¨æ·»åŠ ä¸€ä¸ª if åˆ¤æ–­ï¼š
            åœ¨æ¨¡æ¿æ¸²æŸ“æ—¶ï¼Œä¼šå…ˆåˆ¤æ–­å½“å‰ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼ˆcurrent_user.is_authenticatedï¼‰ã€‚
                å¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼ˆcurrent_user.is_authenticated è¿”å› Falseï¼‰ï¼Œ
                å°±ä¸ä¼šæ¸²æŸ“å¦‚ä¸‹ä»£ç å—ï¼Œå³è¡¨å• <form method="POST" name="form">...</form> éƒ¨åˆ†çš„ HTML ä»£ç  -->
        {% if current_user.is_authenticated %}
        <form method="POST" name="form">
            <!-- æŒ‡å®šæäº¤æ–¹æ³•ä¸º POST -->
            ç¬¬ä¸€ä»£æ£‰é“ƒè™«æ•°é‡(å¤´/ç™¾æ ª)
            <input type="text" name="x1" placeholder="è¾“å…¥ X1ï¼ˆæ•°å€¼ï¼‰" autocomplete="off" required><!-- æ–‡æœ¬è¾“å…¥æ¡† -->
            <br>
            ç¬¬äºŒä»£æ£‰é“ƒè™«æ•°é‡(å¤´/ç™¾æ ª)
            <input type="text" name="x2" placeholder="è¾“å…¥ X2ï¼ˆæ•°å€¼ï¼‰" autocomplete="off" required><!-- æ–‡æœ¬è¾“å…¥æ¡† -->
            <br>
            <input type="submit" name="submit" value="ğŸ‘‰è®¡ç®—å¹¶æäº¤ğŸ‘ˆ" class="btn" /><br><!-- æäº¤æŒ‰é’® -->
            äº§é‡æŸå¤±ç‡(%)
            <input type="text" name="result" placeholder="å¾—å‡º Yï¼ˆæ•°å€¼ï¼‰" readonly="readonly" value="{{ RESULT }}" />
            <br>

        </form>
        {% endif %}{# æ¨¡æ¿å†…å®¹ä¿æŠ¤ #}

    </div>
    <!-- åœ¨è¿™é€è¡Œè¾“å‡º æ£‰é“ƒè™«ä¿¡æ¯(ha_info) çš„è®°å½• -->
    <div align="right">
        {# ä½¿ç”¨ length è¿‡æ»¤å™¨è·å– list_haã€list_ha_limit å˜é‡çš„é•¿åº¦ #}
        {# {{ å˜é‡|è¿‡æ»¤å™¨ }} #}
        <!--æœ‰èŠ±æ‹¬å·ä¸èƒ½ç”¨è¿™ç§æ³¨é‡Š-->
        å·²æœ‰ {{ list_ha | length }} æ¡è®°å½•ï¼Œæ˜¾ç¤º {{ list_ha_limit | length }} æ¡ã€‚
    </div>
    <div class="container mt-3">
        <div class="table-responsive-lg">
            <table class="table table-striped table-hover ">
                <thead class="table-bordered table-success">
                    <tr>
                        <th>ç¼–å·(id)</th>
                        <th>X1(å¤´/ç™¾æ ª)</th>
                        <th>X2(å¤´/ç™¾æ ª)</th>
                        <th>Y(%)</th>
                        <th>åœ°åŒº</th>
                        <th>æ—¥æœŸ(å¹´-æœˆ-æ—¥)</th>
                        <th>è®°å½•äººâ€œç§°å‘¼â€</th>
                        <th>æ“ä½œæŒ‰é’®</th>
                    </tr>
                <tbody>
                    {% for row_ha in list_ha %} {# è¿­ä»£ list_ha å˜é‡ #}
                    <tr>
                        <td>
                            {{ row_ha.id_ha | int }}
                        </td>
                        <td>
                            <code>{{ row_ha.x1 | round(1, 'floor') }}</code>&emsp;
                        </td>
                        <td>
                            <code>{{ row_ha.x2 | round(1, 'floor') }}</code>&emsp;
                        </td>
                        <td>
                            <code>{{ row_ha.y | round(2, 'floor') }}</code>&emsp;
                        </td>
                        <td>
                            <code>{{ Area_info.query.filter_by(id_area=row_ha.id_area).first().name_area }}</code>&emsp;
                        </td>
                        <td>
                            <code>{{ row_ha.date }}{# ç­‰åŒäº row_ha['x1'] #}</code>&emsp;
                        </td>
                        <td>
                            <code>{{ User_info.query.filter_by(id_user=row_ha.id_user).first().name_user }}</code>&emsp;
                        </td>
                        <td class="table-info">
                            <!-- <span class="float-right"> -->
                            {% if current_user.is_authenticated %}
                            <a class="btn" href="{{ url_for('edit', id_ha=row_ha.id_ha) }}">ç¼–è¾‘</a>
                            <form class="inline-form" method="post"
                                action="{{ url_for('delete', id_ha=row_ha.id_ha) }}">
                                <input class="btn" type="submit" name="delete" value="åˆ é™¤"
                                    onclick="return confirm('æ‚¨ç¡®å®šåˆ é™¤å—ï¼Ÿ')">
                            </form>
                            {% endif %}{# æ¨¡æ¿å†…å®¹ä¿æŠ¤ #}
                            <!-- </span> -->
                        </td>
                    </tr>
                </tbody>
                {% endfor %} {# ä½¿ç”¨ endfor æ ‡ç­¾ç»“æŸ for è¯­å¥ #}
            </table>
        </div>
    </div>

    <hr>
    <h2>
        <mark>ç¬¬ä¸€ã€äºŒä»£æ£‰é“ƒè™«å¤åˆä¸ºå®³ ä¸ äº§é‡æŸå¤± çš„ å›å½’æ¨¡å‹ï¼š</mark><br>
    </h2>
    <code>Y = 13.40232 + 4.65075 * X1 + 4.999563 * X2 + 0.624735 * X1**2 + 3.876875 * X2**2 - 1.93 * X1 *
        X2</code><br>
    <p>

        <code>Y</code>ï¼šäº§é‡æŸå¤±ç‡(%)ã€‚<br>
        <code>X1</code>ï¼šä¸€ä»£æ£‰é“ƒè™«æ•°é‡çš„æ°´å¹³ï¼Œ50 å¤´/100æ ª è§„å®šä¸ºâ€œ1â€ã€‚<br>
        <code>X2</code>ï¼šäºŒä»£æ£‰é“ƒè™«æ•°é‡çš„æ°´å¹³ï¼Œ300 å¤´/100æ ª è§„å®šä¸ºâ€œ1â€ã€‚<br>
    </p>
    <hr>
    <h2>
        <mark>ï¼ˆå»ºè®¾ä¸­â€¦â€¦ï¼‰é˜²æ²»æŒ‡æ ‡å…¬å¼ï¼š</mark><br>
        <code>Y = EÃ—CÃ—100%ï¼(HÃ—PÃ—FÃ—R)</code>
    </h2>
    <p>
        Yï¼šå…è®¸äº§é‡æŸå¤±ç‡(%)ã€‚<br>
        <input type="text" name="Y" placeholder="æ ¹æ®ä¸Šè¿°å…¬å¼æ±‚å¾— Y" />
        <input type="submit" name="submit_Y" value="å±•ç¤º/æ±‚ç®— Y" /><br>
        Eï¼šç”Ÿæ€å­¦ç³»æ•°ï¼Œæ ¹æ®è¯¥åœ°åŒºç›®å‰ç”Ÿäº§æ°´å¹³ã€ç»æµæ°´å¹³å’Œå†œæ°‘æ¥å—èƒ½åŠ›ï¼Œå°† E å®šä¸º 2 ä¸ºå®œï¼Œå³å…è®¸æ£‰é“ƒè™«é€ æˆçš„æŸå¤±ä¸è¶…è¿‡é˜²æ²»è´¹ç”¨çš„ 2 å€ã€‚<br>
        <input type="text" name="E" placeholder="è‡ªå®šä¹‰ E ï¼ˆé»˜è®¤ E=2ï¼‰" />
        <input type="submit" name="submit_E" value="æäº¤" /><br>
        Cï¼šé˜²æ²»ä¸€æ¬¡å„ç§è´¹ç”¨ä¹‹å’Œï¼ˆå†œæœºè´¹ 5.00å…ƒ/äº©ï¼Œå†œè¯è´¹ 4.50å…ƒ/äº©ï¼Œåˆè®¡ä¸º9.50å…ƒï¼äº©ï¼‰ã€‚<br>
        <input type="text" name="C" placeholder="è‡ªå®šä¹‰ Cï¼ˆé»˜è®¤ C=9.50ï¼‰" />
        <input type="submit" name="submit_C" value="æäº¤" /><br>
        Hï¼šå¤§ç”°å¹³å‡äº§é‡é‡ï¼ˆ2003~2005å¹´å–€ä»€æ£‰åŒºå¹³å‡ä¸º 90 kg/äº©ï¼‰ã€‚<br>
        <input type="text" name="H" placeholder="è‡ªå®šä¹‰ Hï¼ˆé»˜è®¤ H=90ï¼‰" />
        <input type="submit" name="submit_H" value="æäº¤" /><br>
        Pï¼šå†œäº§å“å•ä»·ï¼ˆ2003~2005å¹´ï¼Œçš®æ£‰å¹³å‡ä»·ä¸º 9.80 å…ƒ/kgï¼‰ã€‚<br>
        <input type="text" name="P" placeholder="è‡ªå®šä¹‰ Pï¼ˆé»˜è®¤ P=9.80ï¼‰" />
        <input type="submit" name="submit_P" value="æäº¤" /><br>
        Fï¼šå®³è™«ä¸ºå®³é€ æˆçš„æœ€å¤§æŸå¤±ç‡ï¼ˆæ®ä¼°è®¡æ£‰é“ƒè™«ç¬¬ä¸€ã€äºŒä»£åˆ†åˆ«ä¸º20ï¼…ã€50ï¼…ï¼‰ã€‚<br>
        <input type="text" name="F" placeholder="è‡ªå®šä¹‰ Fï¼ˆé»˜è®¤ F=0.7ï¼‰" />
        <input type="submit" name="submit_F" value="æäº¤" /><br>
        Rï¼šé˜²æ²»ä¸€æ¬¡çš„é˜²æ²»æ•ˆæœï¼ˆä¸€èˆ¬ä¸º80ï¼…ï¼‰ã€‚<br>
        <input type="text" name="R" placeholder="è‡ªå®šä¹‰ Rï¼ˆé»˜è®¤ R=0.8ï¼‰" />
        <input type="submit" name="submit_R" value="æäº¤" /><br>
    </p>

</div>
{% endblock %}