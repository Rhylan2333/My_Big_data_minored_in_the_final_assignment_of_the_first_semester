<!DOCTYPE html>
<html lang="en">

<head>
    {% block head %}
    <title> æ¬¢è¿ä½¿ç”¨æˆ‘è¿™ä¸ªwebåº”ç”¨ğŸ§‘â€ğŸŒ¾</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- æ–° Bootstrap5 æ ¸å¿ƒ CSS æ–‡ä»¶ -->
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/5.1.1/css/bootstrap.min.css">
    <!-- æœ€æ–°çš„ Bootstrap5 æ ¸å¿ƒ JavaScript æ–‡ä»¶ã€‚bootstrap.bundle.js ï¼ˆæœªå‹ç¼©ç‰ˆï¼‰æˆ– bootstrap.bundle.min.jsï¼ˆå‹ç¼©ç‰ˆï¼‰ åŒ…å«äº†æ†ç»‘çš„æ’ä»¶å¦‚ popper.min.js åŠå…¶ä»–ä¾èµ–è„šæœ¬ -->
    <script src="https://cdn.staticfile.org/twitter-bootstrap/5.1.1/js/bootstrap.bundle.min.js"></script>

    <!-- å¼•å…¥ä½œè€…çš„ CSS æ–‡ä»¶-->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" type="text/css">
    <!-- å¼•å…¥å›¾æ ‡æ–‡ä»¶ -->
    <link rel="icon" href="{{ url_for('static', filename='myicon.ico') }}">
    {% endblock %}
</head>

<body>
    <!-- æ’å…¥åˆ°é¡µé¢æ ‡é¢˜ä¸Šæ–¹ -->
    <nav class="navbar navbar-expand-sm bg-success navbar-dark">
        <ul class="navbar-nav">
            <h1 class="display-6">
                <li class="nav-item active">
                    <a class="nav-link" href="{{ url_for('index') }}">é¦–é¡µ</a>
                </li>
                {% if current_user.is_authenticated %}
                <li>
                    <a href="{{ url_for('settings') }}">æ›´æ”¹æ‚¨çš„ä¿¡æ¯</a>
                </li>
                <li class="nav-item">
                    <a href="{{ url_for('logout') }}">ç™»å‡º</a><!-- class="nav-link disabled" è¿™ä¸ªæ ‡ç­¾æ— æ³•è¢«ç‚¹å‡»-->
                </li>
                {% else %}
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('login') }}">ç”¨æˆ·ç™»å½•</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('register') }}">æ³¨å†Œ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">ç®¡ç†å‘˜ç™»å½•(å»ºè®¾ä¸­)</a>
                </li>
                {% endif %}
            </h1>
        </ul>
    </nav>
    <div class="mt-4 p-5 bg-secondary text-white rounded">
        <a align="center">
            <h1>æ–°ç–†åœ°åŒºç”°é—´æ£‰é“ƒè™«æ•°é‡åŠå…¶å±å®³ï¼ˆä¿¡æ¯ï¼‰ç®¡ç†å¹³å°</h1>
            <h4>ï¼ˆç»Ÿè®¡ ç¬¬ä¸€ã€äºŒä»£æ£‰é“ƒè™«æ•°é‡ï¼Œå¹¶è®¡ç®— äº§é‡æŸå¤±ç‡ çš„ web â€œå°â€ç¨‹åºï¼‰</h4>
        </a>
    </div>
    <hr>
    <h2 align="center">
        <img alt="cotton" src="{{ url_for('static', filename='images/cotton.jpg') }}" height="40px">
        <abbr title="è¿™æ˜¯æ‚¨æ³¨å†Œçš„â€œç§°å‘¼â€ï¼Œç‚¹å‡»å¯¼èˆªæ çš„â€œæ›´æ”¹æ‚¨çš„ä¿¡æ¯â€ä»¥ä¿®æ”¹ã€‚">{{ NAME_USER }}</abbr> æ‚¨å¥½
        <!-- ä¸Šä¸€è¡Œçš„â€œuser_info.name_userâ€è¦è¢«æ”¹ä¸º -->
    </h2>
    <!-- æ’å…¥åˆ°é¡µé¢æ ‡é¢˜ä¸Šæ–¹ -->
    {% for message in get_flashed_messages() %}
    <div class="alert">{{ message }}</div>
    {% endfor %}
    <div class="container p-3 my-2 border">
        <h2>
            <mark>
                {% if current_user.is_authenticated %}
                æŒ‰æç¤ºè¾“å…¥å³å¯æ±‚ç®—ã€æäº¤ï¼š
                {% else %}
                æ‚¨æœªç™»å½•ï¼Œè¯·å…ˆğŸ‘†ç™»å½•ğŸ‘†æˆ–ğŸ‘†æ³¨å†ŒğŸ‘†ï¼Œå¦åˆ™åªèƒ½ä½¿ç”¨<B>â€œè®¡ç®—â€</B>åŠŸèƒ½ã€‚
                {% endif %}
            </mark>
        </h2>
        <div align="center">
            <!-- åœ¨æ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ current_user å˜é‡ã€‚ä»¥åˆ›å»ºæ–°æ¡ç›®è¡¨å•ä¸ºä¾‹ï¼Œæˆ‘ä»¬åœ¨è¡¨å•å¤–éƒ¨æ·»åŠ ä¸€ä¸ª if åˆ¤æ–­ï¼š
                åœ¨æ¨¡æ¿æ¸²æŸ“æ—¶ï¼Œä¼šå…ˆåˆ¤æ–­å½“å‰ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼ˆcurrent_user.is_authenticatedï¼‰ã€‚
                    å¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼ˆcurrent_user.is_authenticated è¿”å› Falseï¼‰ï¼Œ
                    å°±ä¸ä¼šæ¸²æŸ“å¦‚ä¸‹ä»£ç å—ï¼Œå³è¡¨å• <form method="POST" name="form">...</form> éƒ¨åˆ†çš„ HTML ä»£ç  -->
            {% if current_user.is_authenticated %}
            <form method="POST" name="form">
                <!-- æŒ‡å®šæäº¤æ–¹æ³•ä¸º POST -->
                ç¬¬ä¸€ä»£æ£‰é“ƒè™«æ•°é‡(å¤´/ç™¾æ ª)
                <input type="text" name="x1" placeholder="è¾“å…¥ X1ï¼ˆæ•°å€¼ï¼‰" autocomplete="off" required><!-- æ–‡æœ¬è¾“å…¥æ¡† -->
                <br>
                ç¬¬äºŒä»£æ£‰é“ƒè™«æ•°é‡(å¤´/ç™¾æ ª)
                <input type="text" name="x2" placeholder="è¾“å…¥ X2ï¼ˆæ•°å€¼ï¼‰" autocomplete="off" required><!-- æ–‡æœ¬è¾“å…¥æ¡† -->
                <br>
                <input type="submit" name="submit" value="ğŸ‘‰è®¡ç®—å¹¶æäº¤ğŸ‘ˆ" class="btn" /><br><!-- æäº¤æŒ‰é’® -->
                äº§é‡æŸå¤±ç‡(%)
                <input type="text" name="result" placeholder="å¾—å‡º Yï¼ˆæ•°å€¼ï¼‰" readonly="readonly" value="{{ RESULT }}" />
                <br>
            </form>
            {% else %}
            <form method="POST" name="form">
                <!-- æŒ‡å®šæäº¤æ–¹æ³•ä¸º POST -->
                ç¬¬ä¸€ä»£æ£‰é“ƒè™«æ•°é‡(å¤´/ç™¾æ ª)
                <input type="text" name="x1" placeholder="è¾“å…¥ X1ï¼ˆæ•°å€¼ï¼‰" autocomplete="off" required><!-- æ–‡æœ¬è¾“å…¥æ¡† -->
                <br>
                ç¬¬äºŒä»£æ£‰é“ƒè™«æ•°é‡(å¤´/ç™¾æ ª)
                <input type="text" name="x2" placeholder="è¾“å…¥ X2ï¼ˆæ•°å€¼ï¼‰" autocomplete="off" required><!-- æ–‡æœ¬è¾“å…¥æ¡† -->
                <br>
                <input type="submit" name="submit" value="ğŸ‘‰è®¡ç®—ğŸ‘ˆ" class="btn" /><br><!-- æäº¤æŒ‰é’® -->
                äº§é‡æŸå¤±ç‡(%)
                <input type="text" name="result" placeholder="å¾—å‡º Yï¼ˆæ•°å€¼ï¼‰" readonly="readonly"
                    value="{{ RESULT_visitor }}" />
                <br>
            </form>
            {% endif %}{# æ¨¡æ¿å†…å®¹ä¿æŠ¤ #}

        </div>
        <!-- åœ¨è¿™é€è¡Œè¾“å‡º æ£‰é“ƒè™«ä¿¡æ¯(ha_info) çš„è®°å½• -->
        <div align="right">
            {# ä½¿ç”¨ length è¿‡æ»¤å™¨è·å– list_ha å˜é‡çš„é•¿åº¦ #}
            {# {{ å˜é‡|è¿‡æ»¤å™¨ }} #}
            <!--æœ‰èŠ±æ‹¬å·ä¸èƒ½ç”¨è¿™ç§æ³¨é‡Š-->
            å·²æœ‰ {{ list_ha | length }} æ¡è®°å½•ã€‚
            {% if current_user.is_authenticated %}
            <a href="{{ url_for('ha_detail') }}">æ˜¾ç¤ºå…¨éƒ¨è®°å½•</a>
            {% endif %}{# æ¨¡æ¿å†…å®¹ä¿æŠ¤ #}
        </div>
        {% if current_user.is_authenticated %}
        <div class="container mt-3">
            <div class="table-responsive-lg">
                <table class="table table-striped table-hover ">
                    <thead class="table-bordered table-success">
                        <tr>
                            <th>ç¼–å·(id)</th>
                            <th>X1(å¤´/ç™¾æ ª)</th>
                            <th>X2(å¤´/ç™¾æ ª)</th>
                            <th>Y(%)</th>
                            <th>åœ°åŒº</th>
                            <th>æ—¥æœŸ(å¹´-æœˆ-æ—¥)</th>
                            <th>è®°å½•äººâ€œç§°å‘¼â€</th>
                            <th>æ“ä½œæŒ‰é’®</th>
                        </tr>
                    <tbody>
                        {% for row_ha in list_ha %} {# è¿­ä»£ list_ha å˜é‡ #}
                        <tr>
                            <td>
                                {{ row_ha.id_ha | int }}
                            </td>
                            <td>
                                <code>{{ row_ha.x1 | round(1, 'floor') }}</code>&emsp;
                            </td>
                            <td>
                                <code>{{ row_ha.x2 | round(1, 'floor') }}</code>&emsp;
                            </td>
                            <td>
                                <code>{{ row_ha.y | round(2, 'floor') }}</code>&emsp;
                            </td>
                            <td>
                                <code>{{ Area_info.query.filter_by(id_area=row_ha.id_area).first().name_area }}</code>&emsp;
                            </td>
                            <td>
                                <code>{{ row_ha.date }}{# ç­‰åŒäº row_ha['x1'] #}</code>&emsp;
                            </td>
                            <td>
                                <code>{{ User_info.query.filter_by(id_user=row_ha.id_user).first().name_user }}</code>&emsp;
                            </td>
                            <td class="table-info">
                                <!-- <span class="float-right"> -->
                                {% if current_user.is_authenticated %}
                                <a class="btn" href="{{ url_for('edit', id_ha=row_ha.id_ha) }}">ç¼–è¾‘</a>
                                <form class="inline-form" method="post"
                                    action="{{ url_for('delete', id_ha=row_ha.id_ha) }}">
                                    <input class="btn" type="submit" name="delete" value="åˆ é™¤"
                                        onclick="return confirm('æ‚¨ç¡®å®šåˆ é™¤å—ï¼Ÿ')">
                                </form>
                                {% endif %}{# æ¨¡æ¿å†…å®¹ä¿æŠ¤ #}
                                <!-- </span> -->
                            </td>
                        </tr>
                    </tbody>
                    {% endfor %} {# ä½¿ç”¨ endfor æ ‡ç­¾ç»“æŸ for è¯­å¥ #}
                </table>
            </div>
        </div>
        {% endif %}{# æ¨¡æ¿å†…å®¹ä¿æŠ¤ #}
    </div>
    <div class="container p-3 my-2 border">
        <footer class="blockquote-footer" align="left">
            å‚è€ƒ: <br>
            å§šä¸¾,æå·å®¾,ç‹ä¼Ÿ,ç­‰. å–€ä»€æ£‰åŒºç¬¬ä¸€ã€äºŒä»£æ£‰é“ƒè™«å¯¹æ£‰èŠ±çš„å¤åˆå±å®³å’Œé˜²æ²»æŒ‡æ ‡ç ”ç©¶[J].æ–°ç–†å†œä¸šç§‘å­¦,2008,45(1):105-108.<br>
            <a href="https://helloflask.com/tutorial/">Flask å…¥é—¨æ•™ç¨‹ ä½¿ç”¨ Python å’Œ Flask å¼€å‘ä½ çš„ç¬¬ä¸€ä¸ª Web ç¨‹åº</a><br>
            <a href="https://www.runoob.com/bootstrap5/bootstrap5-tutorial.html">Bootstrap5 æ•™ç¨‹ | èœé¸Ÿæ•™ç¨‹</a><br>
            <a href="https://www.csdn.net">CSDN - ä¸“ä¸šå¼€å‘è€…ç¤¾åŒº</a><br>
            <a href="https://stackoverflow.com">Stack Overflow - Where Developers Learn, Share, &amp; Build
                Careers</a><br>
            &copy;<a href="https://github.com/Rhylan2333">æ¬¢è¿æ¥æˆ‘çš„ Github é€›é€›</a><br>
        </footer>
        <a href="https://github.com/Rhylan2333/My_Big_data_minored_in_the_final_assignment_of_the_first_semester">æœ¬
            web
            åº”ç”¨çš„æºç å·²ä¸Šä¼ è‡³ Github</a>
</body>

</html>